@tailwind base;
@tailwind components;
@tailwind utilities;

/* Page root: allow page to grow and scroll when content larger than viewport.
   When content is smaller, internal elements will use min-height to fill viewport. */
html,
body,
#root {
  overflow-y: auto;
  height: auto;
  min-height: 100vh;
}

/* Custom helpers for layout spacing and scrollbars */
/* Add 24px margin to blocks that explicitly opt in via .page-block */
.page-block {
  /* Add top and bottom separation between logical blocks on the page
     Top margin set to 0 so blocks sit directly under header/each other
     Horizontal gap is 12px, bottom gap is 24px as requested: 0 12px 24px 12px */
  margin: 0 12px 24px 12px;
  /* Keep side spacing controlled by container for very narrow layouts; margins prevent touching edges */
}

/* Ensure page container height grows with content but has minimum screen height */
[data-testid="page-container"] {
  /* Make page container have minimum screen height, but grow with content if larger */
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Hide default scrollbar for horizontal overflow (top tabs wrapper). Use attribute selector so tests unaffected. */
[data-testid="top-tabs-wrapper"] {
  -ms-overflow-style: none;
  /* IE and Edge */
  scrollbar-width: none;
  /* Firefox */
  /* Bring the border 24px up visually by pulling the element up and adding top padding so tabs don't move visually.
     This keeps the sticky behavior while moving the bottom border (border-b) 24px higher. */
  /* Use pseudo element for the border, more predictable than layout shift with negative margins */
  position: relative;
  /* keep the class for tests but hide actual border; we draw the visual border using ::after */
  border-bottom-color: transparent !important;
  /* Hide any visible scrollbar track background and prevent an ugly gray bar when scrolling horizontally */
  /* Ensure horizontal scrolling only for tabs; avoid vertical scrolling inside the menu */
  overflow-x: auto;
}

[data-testid="top-tabs-wrapper"]::-webkit-scrollbar {
  height: 0;
  /* Hide horizontal scrollbar for Webkit browsers */
}

[data-testid="top-tabs-wrapper"]::-webkit-scrollbar-track {
  background: transparent;
}

[data-testid="top-tabs-wrapper"]::-webkit-scrollbar-thumb {
  background: transparent;
}

/* The gray dividing line that should not horizontally scroll is now drawn
  on the outer (non-scrollable) wrapper. Keep the top-tabs-wrapper selector
  but change drawing to top-tabs-outer to avoid horizontal movement. */
/* Visual border for the scrollable tabs was intentionally moved to .top-tabs-outer
   so it does not move horizontally when the inner tab list scrolls. */

/* New non-scrolling visual separator placed under the sticky tabs.
   This element is positioned in a parent that does not scroll horizontally
   so the stripe remains fixed when the top tabs are scrolled horizontally. */
.top-tabs-outer {
  position: relative;
}

.top-tabs-outer::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  height: 1px;
  background-color: rgb(229 231 235);
  bottom: 0;
  /* sits below the blue active tab border */
  pointer-events: none;
  z-index: 10;
  /* below the tab (z-30 on the sticky wrapper) */
}

/* Swiper slides (tab panels) should size to content and not force a tall container.
   autoHeight is used, but provide CSS fallback to prevent large empty space. */

.mySwiper {
  /* Slides should be at least viewport minus tabs height; allow expansion when content larger */
  min-height: calc(100vh - var(--tabs-height, 64px)) !important;
  /* do not force a max-height here — let slides grow with content when needed */
  overflow: visible;
}

.mySwiper .swiper-slide {
  min-height: calc(100vh - var(--tabs-height, 64px)) !important;
  display: block;
  overflow: visible !important;
}

.mySwiper .swiper-wrapper {
  overflow: visible;
}

/* Make slides scroll internally if content exceeds the viewport height.
   Calculate max height based on the top tabs height via CSS variable --tabs-height. */
.mySwiper .swiper-slide>div {
  /* Ensure slide content takes natural height but is at least viewport minus tabs.
     If content is short — slide will fill available viewport space (no scroll).
     If content is long — slide will expand to fit content (page-level scroll). */
  overflow: visible;
  height: auto;
  min-height: calc(100vh - var(--tabs-height, 64px));
  overscroll-behavior: auto;
  -webkit-overflow-scrolling: touch;
  touch-action: auto;
}

/* removed: Swiper auto-height – we use fixed viewport-based height for internal scrolling */

/* Revert changes to tab content and parent container styles */
.tab-content {
  height: auto;
  /* Automatic height to fit content */
  min-height: 0;
  /* avoid forcing full viewport height */
  overflow: visible;
  /* Prevent clipping of overflowing content */
}

/* Ensure parent container does not restrict height */
.parent-container {
  height: auto;
  overflow: visible;
}

/* Fix menu and container behavior during scroll */
.menu {
  position: sticky;
  /* Fix menu at the top during scroll */
  top: 0;
  z-index: 1000;
  /* Ensure menu stays above other elements */
}

.container {
  position: relative;
  /* Ensure container stays in place */
  overflow-y: auto;
  /* Prevent content from overflowing */
}

.gray-container {
  height: auto;
  /* Automatic height to fit content */
  overflow: auto;
  /* Enable scrolling inside the container */
  background-color: #f0f0f0;
  /* Gray background */
}

/* Fix the main container and ensure proper scrolling behavior */
/* Remove special fixed layout that prevented normal page layout and caused scrolling issues.
   We'll rely on disabling body scroll and enabling the menu scroll only. */
.main-container {
  position: static !important;
  width: 100%;
  height: auto !important;
  overflow: visible !important;
}

.tab-content {
  height: auto !important;
  overflow: hidden !important;
  /* Prevent tab content from scrolling the page */
}

/* Ensure only the menu scrolls, disable page scroll */
/* Disable page scroll and allow scrolling only inside the menu. */
/* Prevent page from scrolling and avoid scroll chain/overscroll */


[data-testid="page-container"] {
  /* Page container should be at least full viewport height and grow with content */
  min-height: 100vh;
  height: auto;
  overflow: visible;
}